<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>travelBookProc.jsp</title>
</head>
<body>
<%
request.setCharacterEncoding("UTF-8");

String rno=
String rcode=
String rjumin1=
String rjumin2=
String rjumin=
String rname=
String rphone1=
String rphone2=
String rphone3=
String rphone=

Connection con=null;
PreparedStatement pstmt=null;
ResultSet rs = null;

try{
	String url     ="jdbc:oracle:thin:@localhost:1522:xe";
	String user    ="c##w";
	String password="1234";
	String driver  ="oracle.jdbc.driver.OracleDriver";			
	Class.forName(driver);						
	con=DriverManager.getConnection(url, user, password);			
	//out.println("오라클 DB 서버 연결 성공");	
	
	StringBuilder sql=new StringBuilder();
	sql.append(" insert into tbl_reserve_01 ");
	sql.append(" FROM tbl_tourcode_02 ");
	sql.append(" ORDER BY tcode ");
	
	pstmt=con.prepareStatement(sql.toString());
	rs=pstmt.executeQuery();
	if(rs.next()){
		String tname="";
		do {
		tname += "<option value='" +rs.getString("tcode")+"'>";
		tname += "["+rs.getString("tcode")+"]";
		tname += rs.getString("tarea") +" ";
		tname += rs.getString("tdate").substring(0,4)+"-";
		tname += rs.getString("tdate").substring(4,6)+"-";
		tname += rs.getString("tdate").substring(6);
		tname += " 출발";
		tname += "</option>";		
		}while(rs.next());
		
		out.print(tname);
	}//if end
	
}catch(Exception e){
	out.println("오라클 DB 연결 실패"+e);
}finally{
	try{
		if(pstmt!=null){pstmt.close();}
	}catch(Exception e){}
	try{
		if(con!=null){con.close();}
	}catch(Exception e){}
}//end
%>
</body>
</html>